POST /v1/messages?beta=true HTTP/1.1
host: api.anthropic.com
connection: keep-alive
Accept: application/json
X-Stainless-Retry-Count: 0
X-Stainless-Timeout: 600
X-Stainless-Lang: js
X-Stainless-Package-Version: 0.70.0
X-Stainless-OS: MacOS
X-Stainless-Arch: arm64
X-Stainless-Runtime: node
X-Stainless-Runtime-Version: v25.2.1
anthropic-dangerous-direct-browser-access: true
anthropic-version: 2023-06-01
authorization: Bearer sk-api-key-here
x-app: cli
User-Agent: claude-cli/2.0.76 (external, cli)
content-type: application/json
anthropic-beta: oauth-2025-04-20,interleaved-thinking-2025-05-14
x-stainless-helper-method: stream
accept-language: *
sec-fetch-mode: cors
accept-encoding: br, gzip, deflate
content-length: 918

{
  "model": "claude-haiku-4-5-20251001",
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "text",
          "text": "explain this repo and dump to ./CONTENT.md"
        }
      ]
    },
    {
      "role": "assistant",
      "content": [
        {
          "type": "text",
          "text": "{"
        }
      ]
    }
  ],
  "system": [
    {
      "type": "text",
      "text": "You are Claude Code, Anthropic's official CLI for Claude."
    },
    {
      "type": "text",
      "text": "Analyze if this message indicates a new conversation topic. If it does, extract a 2-3 word title that captures the new topic. Format your response as a JSON object with two fields: 'isNewTopic' (boolean) and 'title' (string, or null if isNewTopic is false). Only include these fields, no other text. ONLY generate the JSON object, no other text (eg. no markdown)."
    }
  ],
  "tools": [],
  "metadata": {
    "user_id": "user_f7c53f685190e59f3f0cd72d0a5d8319cb9bf916993925befd145ade71b437ee_account_4c3bcb02-4afd-4048-9f34-a4477aa92825_session_07bf99a1-022c-48ac-bf82-2e62485d82f8"
  },
  "max_tokens": 32000,
  "stream": true
}